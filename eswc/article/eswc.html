<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
  prefix="
  schema: http://schema.org/
  prism: http://prismstandard.org/namespaces/basic/2.0/
  dcterms: http://purl.org/dc/terms/">
  <head>
    <!-- Visualisation requirements (mandatory for optimal reading) -->
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../css/rash.css"/>
    <script src="../js/jquery.min.js"><![CDATA[ ]]></script>
    <script src="../js/bootstrap.min.js"><![CDATA[ ]]></script>
    <script src="../js/rash.js"><![CDATA[ ]]></script>
    <!-- /END Visualisation requirements (mandatory for optimal reading) -->

    <title property="dcterms:title">AMI-Table: Creation of Semantic Tables from PDF documents</title>

    <!-- Author's data (one or more) -->
    <meta about="#pmr" property="schema:name" name="dc.creator" content="Peter Murray-Rust"/>
    <meta about="#pmr" property="schema:email" content="peter@contentmine.org"/>
    <link about="#pmr" property="schema:affiliation" href="#contentmine"/>
    <link about="#pmr" property="schema:affiliation" href="#chem-unicam"/>

    <meta about="#chjh" property="schema:name" name="dc.creator" content="Chris H J Hartgerink"/>
    <meta about="#chjh" property="schema:email" content="chjh@protonmail.com"/>
    <link about="#chjh" property="schema:affiliation" href="#contentmine"/>
    <link about="#chjh" property="schema:affiliation" href="#uni-tilburg"/>

    <!-- Affiliations -->
    <meta about="#contentmine" property="schema:name" content="ContentMine Ltd, Future Business Centre, Kings Hedges Road, CB4 2HY, Cambridge, UK"/>
    <meta about="#chem-unicam" property="schema:name" content="Department of Chemistry, University of Cambridge, CB2 1EW, UK"/>
    <meta about="#uni-tilburg" property="schema:name" content="Methodology and Statistics Tilburg School of Social and Behavioral Sciences Tilburg University"/>

    <!-- Paper keywords (one or more) -->
    <meta property="prism:keyword" content="PDF"/>
    <meta property="prism:keyword" content="semantic web"/>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML"> </script>
  </head>
  <body>
    <section id="SectionAbstract" role="doc-abstract">
      <h1>Abstract</h1>
      <p>Tables in PDF documents are located (<em>retrieved</em>) and the contents are semantically <em>extracted</em> into valid XHTML tables. 
		  These tables can transformed into <em>Tidy Data</em> which is then searchable using XPath and SPARQL. The workflow uses 
		  Apache <em>PDFBox</em> to create a stream of characters and graphics paths in normalized page coordinates. The tables are located with 
		  <em>GROBID</em> which passes coordinates to <em>AMI</em> to extract contents (caption, and contents). AMI futher analyses contents
		  into title, header, body, footer. The header and body are further extracted into "rows" and "columns". Since many "tables" are not a strict 
		  cartesian product of rows and columns, we develop the semantics of "split-column", "subheaders", "subtables" and "split-row". 
		  These can be normalised into <em>HTML5</em> and <em>Tidy data</em> allowing search by semantic tools.
	  </p>
	  <p>We developed the system against 20 journals in the biomedical sciences giving 50 articles and 170 tables. Most were created in APA-like style 
		  (American Psychological Association) style, with multi-row split-column headers and frequent subtables and few explict table cells.  
		  We classified tables as messy, untidy and tidy (usually single header rows and no subtables). GROBID ws used to extract table coordinates 
		  and gave metrics of 91 TP, 20 FP, and 21 FN. AMI was tested separately by manually excising 167 true tables. These were transformed into raw SVG
		  files, and the contents re-assembled heuristically into high-level primitives (words, phrases, styles, superscripts) and regions (lines, boxes).
		  Heuristics were used to create table rows, columns and cells which were populated with HTML content. 
	  </p>
	  <p>
		 The analysis was blinded from the developers. We used expert classification of the raw table structure into a matrix of (contents {bad, reasonable, close to perfect, perfect}). AMI was used to extract HTML5 from these with the same expert classification. Of 106 tables, 33 were perfect:perfect (33%) with 70% (reasonable:reasonable) or better. 
      </p>
	  <p> The project is ongoing and carried out as Open Notebook Science where all data and discussion is immediately uploaded to the public web.</p>
    </section>
    <section>
      <h1>Introduction</h1>
	  <section>
		  <h2>Note on Strategy</h2>
		  <em>
	  <p>
	  	This paper reports on progress in extracting semantic data from tables in PDF documents, especially in the biomedical sciences. We have written a general, heuristic approach which covers a range of tables and which we believe will perform well against the gridded tables in the ESWC2017 challenge. If this paper is accepted we will tune the tools for EWSC-like tables (mainly explicitly gridded) and submit a results paper before the Meeting. 
	  </p>
	  <p>All our work is carried out as Open Notebook Science (Bradley) where all parts of the process are visible to the world as it happens (e.g. daily or better commits). We also believe in Collaborative Science, exemplified by the Human Genome project, GalaxyZoo, and OpenSourceMalaria. We will announce this project to the world and invite collaboration, with the aim to refining the heuristics (and, where appropriate, Machine Learning).
	  </p>
  </em>
     </section>
	 <section>
		 <h2>What is a Table?</h2>
		 <p>To extract tables we need a target schema, but few of these have a semantic structure. 
			 <section>
				 <h3>Simple table</h3>
				 The simplest tables, as exemplified by the CSV (TSV) format, consist of the cartesian product of <em>rows</em> and <em>columns</em>, ideally with row and column labels.
			 <table>
				 <caption>simple cartesian table. </caption>
				 <tr>
					 <td>
			 <table>
				 <tr>
					 <th class="sample">Sample</th>
					 <th class="age_yr">Age(yr)</th>
					 <th class="mass_y">mass(g)</th>
				 </tr>
				 <tr>
					 <td class="rowtitle">A123</td>
					 <td>23</td>
					 <td>99</td>
				 </tr>
				 <tr>
					 <td class="rowtitle">A456</td>
					 <td>33</td>
					 <td>56</td>
				 </tr>
				 <tr>
					 <td class="rowtitle">A678</td>
					 <td>34</td>
					 <td>57</td>
				 </tr>
					</table>
				</td>
				<td>
	   			 &lt;table><br/>
	   				 &lt;tr><
	   					 &lt;th>Sample&lt;/th>
	   					 &lt;th>Age(yr)&lt;/th>
	   					 &lt;th>mass(g)&lt;/th>
	   				 &lt;/tr><br/>
	   				 &lt;tr>
	   					 &lt;td>A123&lt;/td>
	   					 &lt;td>23&lt;/td>
	   					 &lt;td>99&lt;/td>
	   				 &lt;/tr><br/>
	   				 &lt;tr>
	   					 &lt;td>A456&lt;/td>
	   					 &lt;td>33&lt;/td>
	   					 &lt;td>56&lt;/td>
	   				 &lt;/tr><br/>
	   				 &lt;tr>
	   					 &lt;td>A678&lt;/td>
	   					 &lt;td>34&lt;/td>
	   					 &lt;td>57&lt;/td>
	   				 &lt;/tr><br/>
				&lt;/table>
			</td>
		</table>
		The task is to go from the left side (with no semantic structure) to the right, using heuristics.
	</section>
	<section>
		<h3>Complex table</h3>
		Many scientific tables have mopre complex semantics, often iimplict and only indicated by visial clues.
		<table height="65%">
			<tr><th>Original (screen shot)</th>
				<th>AMI-annotation</th>
			</tr>
			<tr>
				
				<td><img height="75%" width="75%" src="_subtable_a.png"/></td>
				<td><img src="_subtables.png"/></td>
</tr>
	<table>
	</section>
			
	 </section>
	 <section>
		 <h2>PDF Documents</h2>
		 <p>
			 PDF documents have very little structure; character streams, graphicsPaths, and bitmaps, but no support for higher primitives such as words, phrases, rectangles, etc. Table reconstruction therefore requires heuristics. Our process includes:
			 <ul>
				 <li><b>normalization of character stream</b>. Unfortaunely many publishers use non-standard, undocumented, font-families. While the US-ASCII range(32-127) is normally correct, higher code points, especially maths, are frequently totally corrupted. Other problems include diacritics, ligatures, small caps, etc. TeX-based fonts and Mathematical PI  can suffer from this. Many publishers (typesetters) have arcane fonts ("Adv"). AMI has conversion tables for the commonest.</li>
					 <li>Sub and superscripts (figure 1)</li>
		 </p>
		 <figure><img="./">
	 </section>
	 
 </section>

      <section>
        <h1>Results</h1>
        <figure id="table1">
          <table>
			  <caption>Retrieved structure of tables</caption>
            <tr>
              <th rowspan="1" colspan="1">
                
              </th>
              <th rowspan="1" colspan="1">
                bad
              </th>
              <th rowspan="1" colspan="1">
                reasonable
              </th>
              <th rowspan="1" colspan="1">
                almost perfect
              </th>
              <th rowspan="1" colspan="1">
                perfect
              </th>
            </tr>
            <tr>
              <td rowspan="1" colspan="1">
                <p>bad</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
            </tr>
            <tr>
              <td rowspan="1" colspan="1">
                <p>reasonable</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
		  </tr>
            <tr>
              <td rowspan="1" colspan="1">
                <p>perfect</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
            </tr>
            <tr>
              <td rowspan="1" colspan="1">
                <p>almost perfect</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
              <td rowspan="1" colspan="1">
                <p>xx</p>
              </td>
            </tr>
          </table>
      </section>
    <section id="SectionAcknowledgements" role="doc-acknowledgements">
      <h1>Acknowledgements</h1>
      <p>We would like to thank all the people who participated to our (intensive and stressing)
        evaluation.</p>
    </section>
    <section id="SectionReferences" role="doc-bibliography">
      <h1>References</h1>
      <ul>
        <li id="PeroniCiTOFaBiO" role="doc-biblioentry">
          <p>Peroni, S., Shotton, D. (2012). FaBiO and CiTO: ontologies for describing bibliographic
            resources and citations. In Journal of Web Semantics, 17 (December 2012): 33-43. DOI:
            10.1016/j.websem.2012.08.001</p>
        </li>

      </ul>
    </section>
    <section role="doc-endnotes">
      <section id="ftn6" role="doc-endnote">
        <p>CiTO: <a href="http://purl.org/spar/cito">http://purl.org/spar/cito</a>.</p>
      </section>
    </section>
  </body>
</html>